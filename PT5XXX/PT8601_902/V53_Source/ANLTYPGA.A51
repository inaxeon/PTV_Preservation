$NOMOD51			;Disable the predefined 8051 register set

$INCLUDE( REG320.INC)		;Include the predefined 8052 register set
$INCLUDE( MACROS.INC)		;Include user defined macros

;************************************************************************
;* Copyright PHILIPS TV TEST EQUIPMENT A/S, BRONDBY 1997		*
;* Project: PT8601 Analog Test Signal generator				*
;* Module:  ANLTYPGA.A51						*
;* Author:  Kim Engedahl, DEV						*
;* Org.  :  960920							*
;* Rev.  :  990613, KEn DEV						*
;* Status:  Version 1.1							*
;* 									*
;* This module contains the following functions:			*
;* 									*
;*	GA1_F1L22							*
;*	GA2_F1L22							*
;*	GA3_F1L22							*
;*	GA4_F1L22							*
;*	GA5_F1L22							*
;*	GA6_F1L22							*
;* 									*
;* Changes:								*
;* 990613: Renamed pattern types					*
;* 970703: Releasing as SW. 1.2						*
;* 									*
;* Type 1 pattern: 288 							*
;* Type 2 pattern: 24,1,1,1,1,44,144,72					*
;* Type 3 pattern: 192,96 						*
;* Type 4 pattern: 38,53,53,53,53,38	 				*
;* Type 5 pattern: 14,1,14,1,35,69,10,1,10,69,35,1,14,1,13		*
;* Type 6 pattern: 7,1,20,1,..,20,1,7					*
;*									*
;* NB! Placering af tekst aftalt med BLï¿½ 970522, kl ca. 11.00. Han ta'r	*
;*     skraldet hvis der kommer klager					*
;************************************************************************

NAME		TypeGA_LineRoutines

PUBLIC	GA1_F1L22, GA2_F1L22, GA3_F1L22, GA4_F1L22, GA5_F1L22, GA6_F1L22

EXTRN CODE( GenericMSBPort, LineAdrPort)

EXTRN DATA( StatusPort, Status)

EXTRN DATA( PatternPtr)				;Used in ReturnLineCntIntr
EXTRN BIT( Text1Enable, Status_S0, Status_TXT_ON)

;************************************************************************

GA_LineRoutine_Code	SEGMENT	CODE
	RSEG	GA_LineRoutine_Code
	USING	1

;************************************************************************
;* Type 1:  288 in all fields
;* Field n: 22,24,40
;* Timing: Worst case: +23 cycles
;************************************************************************
GA1_F1L22:
	UpdateType1 -2, GA1_F1L24	;+20
;************************************************************************
GA1_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType1 -16, GA1_F1L40	;+20
;************************************************************************
GA1_F1L40:
	CLR	Status_TXT_ON		;+1 Clear possible text

	UpdateType1 -295, GA1_F2L22	;+20
;************************************************************************
GA1_F2L22:
	UpdateType1 -2, GA1_F2L24	;+20
;************************************************************************
GA1_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType1 -16, GA1_F2L40	;+20
;************************************************************************
GA1_F2L40:
	CLR	Status_TXT_ON		;+1 Clear possible text

	UpdateType1 -294, GA1_F1L22	;+20



;************************************************************************
;* Type 2:  24,1,1,1,1,44,144,72 in all fields
;* Field n: 22,24,40,46,47,48,49,50,94,238
;* Timing: Worst case: +34 cycles
;************************************************************************
GA2_F1L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2
	
	UpdateType2 1, -2, GA2_F1L24	;+30
;************************************************************************
GA2_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA2_F1L40	;+20
;************************************************************************
GA2_F1L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -6, GA2_F1L46	;+20
;************************************************************************
GA2_F1L46:
	UpdateType2 1, -1, GA2_F1L47	;+30
;************************************************************************
GA2_F1L47:
	UpdateType2 1, -1, GA2_F1L48	;+30
;************************************************************************
GA2_F1L48:
	UpdateType2 1, -1, GA2_F1L49	;+30
;************************************************************************
GA2_F1L49:
	UpdateType2 1, -1, GA2_F1L50	;+30
;************************************************************************
GA2_F1L50:
	UpdateType2 1, -44, GA2_F1L94	;+30
;************************************************************************
GA2_F1L94:
	UpdateType2 1, -144, GA2_F1L238	;+30
;************************************************************************
GA2_F1L238:
	UpdateType2 1, -97, GA2_F2L22	;+30
;************************************************************************
GA2_F2L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2
	
	UpdateType2 1, -2, GA2_F2L24	;+30
;************************************************************************
GA2_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA2_F2L40	;+20
;************************************************************************
GA2_F2L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -6, GA2_F2L46	;+20
;************************************************************************
GA2_F2L46:
	UpdateType2 1, -1, GA2_F2L47	;+30
;************************************************************************
GA2_F2L47:
	UpdateType2 1, -1, GA2_F2L48	;+30
;************************************************************************
GA2_F2L48:
	UpdateType2 1, -1, GA2_F2L49	;+30
;************************************************************************
GA2_F2L49:
	UpdateType2 1, -1, GA2_F2L50	;+30
;************************************************************************
GA2_F2L50:
	UpdateType2 1, -44, GA2_F2L94	;+30
;************************************************************************
GA2_F2L94:
	UpdateType2 1, -144, GA2_F2L238	;+30
;************************************************************************
GA2_F2L238:
	UpdateType2 1, -96, GA2_F1L22	;+30


;************************************************************************
;* Type 3:  192, 96 in all fields
;* Field n: 22,24,40,214
;* Timing: Worst case: +34 cycles
;************************************************************************
GA3_F1L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA3_F1L24	;+30
;************************************************************************
GA3_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA3_F1L40	;+20
;************************************************************************
GA3_F1L40:
	CLR	Status_TXT_ON		;+1 Clear possible text

	UpdateType2 0, -174, GA3_F1L214	;+20
;************************************************************************
GA3_F1L214:
	UpdateType2 1, -121, GA3_F2L22	;+30
;************************************************************************
GA3_F2L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA3_F2L24	;+30
;************************************************************************
GA3_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA3_F2L40	;+20
;************************************************************************
GA3_F2L40:
	CLR	Status_TXT_ON		;+1 Clear possible text

	UpdateType2 0, -174, GA3_F2L214	;+20
;************************************************************************
GA3_F2L214:
	UpdateType2 1, -120, GA3_F1L22	;+30


;************************************************************************
;* Type 4:  38,53,53,53,53,38
;* Field 1: 22,24,40,60,113,166,219,272
;* Timing: Worst case: +34 cycles
;************************************************************************
GA4_F1L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA4_F1L24	;+30
;************************************************************************
GA4_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA4_F1L40	;+20
;************************************************************************
GA4_F1L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -20, GA4_F1L60	;+20
;************************************************************************
GA4_F1L60:
	UpdateType2 1, -53, GA4_F1L113	;+30
;************************************************************************
GA4_F1L113:
	UpdateType2 1, -53, GA4_F1L166	;+30
;************************************************************************
GA4_F1L166:
	UpdateType2 1, -53, GA4_F1L219	;+30
;************************************************************************
GA4_F1L219:
	UpdateType2 1, -53, GA4_F1L272	;+30
;************************************************************************
GA4_F1L272:
	UpdateType2 1, -63, GA4_F2L22	;+30
;************************************************************************
GA4_F2L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA4_F2L24	;+30
;************************************************************************
GA4_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -16, GA4_F2L40	;+20
;************************************************************************
GA4_F2L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -20, GA4_F2L60	;+20
;************************************************************************
GA4_F2L60:
	UpdateType2 1, -53, GA4_F2L113	;+30
;************************************************************************
GA4_F2L113:
	UpdateType2 1, -53, GA4_F2L166	;+30
;************************************************************************
GA4_F2L166:
	UpdateType2 1, -53, GA4_F2L219	;+30
;************************************************************************
GA4_F2L219:
	UpdateType2 1, -53, GA4_F2L272	;+30
;************************************************************************
GA4_F2L272:
	UpdateType2 1, -62, GA4_F1L22	;+30


;************************************************************************
;* Type 5:  14,1,14,1,35,69,10,1,10,69,35,1,14,1,13
;* Field n: 22,24,36,37,40,51,52,87,156,166,167,177,246,281,282,296,297
;* Timing: Worst case: +34 cycles
;************************************************************************
GA5_F1L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA5_F1L24	;+30
;************************************************************************
GA5_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -12, GA5_F1L36	;+20
;************************************************************************
GA5_F1L36:
	UpdateType2 1, -1, GA5_F1L37	;+30
;************************************************************************
GA5_F1L37:
	UpdateType2 1, -3, GA5_F1L40	;+30
;************************************************************************
GA5_F1L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -11, GA5_F1L51	;+20
;************************************************************************
GA5_F1L51:
	UpdateType2 1, -1, GA5_F1L52	;+30
;************************************************************************
GA5_F1L52:
	UpdateType2 1, -35, GA5_F1L87	;+30
;************************************************************************
GA5_F1L87:
	UpdateType2 1, -69, GA5_F1L156	;+30
;************************************************************************
GA5_F1L156:
	UpdateType2 1, -10, GA5_F1L166	;+30
;************************************************************************
GA5_F1L166:
	UpdateType2 1, -1, GA5_F1L167	;+30
;************************************************************************
GA5_F1L167:
	UpdateType2 1, -10, GA5_F1L177	;+30
;************************************************************************
GA5_F1L177:
	UpdateType2 1, -69, GA5_F1L246	;+30
;************************************************************************
GA5_F1L246:
	UpdateType2 1, -35, GA5_F1L281	;+30
;************************************************************************
GA5_F1L281:
	UpdateType2 1, -1, GA5_F1L282	;+30
;************************************************************************
GA5_F1L282:
	UpdateType2 1, -14, GA5_F1L296	;+30
;************************************************************************
GA5_F1L296:
	UpdateType2 1, -1, GA5_F1L297	;+30
;************************************************************************
GA5_F1L297:
	UpdateType2 1, -38, GA5_F2L22	;+30
;************************************************************************
GA5_F2L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA5_F2L24	;+30
;************************************************************************
GA5_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -12, GA5_F2L36	;+20
;************************************************************************
GA5_F2L36:
	UpdateType2 1, -1, GA5_F2L37	;+30
;************************************************************************
GA5_F2L37:
	UpdateType2 1, -3, GA5_F2L40	;+30
;************************************************************************
GA5_F2L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -11, GA5_F2L51	;+20
;************************************************************************
GA5_F2L51:
	UpdateType2 1, -1, GA5_F2L52	;+30
;************************************************************************
GA5_F2L52:
	UpdateType2 1, -35, GA5_F2L87	;+30
;************************************************************************
GA5_F2L87:
	UpdateType2 1, -69, GA5_F2L156	;+30
;************************************************************************
GA5_F2L156:
	UpdateType2 1, -10, GA5_F2L166	;+30
;************************************************************************
GA5_F2L166:
	UpdateType2 1, -1, GA5_F2L167	;+30
;************************************************************************
GA5_F2L167:
	UpdateType2 1, -10, GA5_F2L177	;+30
;************************************************************************
GA5_F2L177:
	UpdateType2 1, -69, GA5_F2L246	;+30
;************************************************************************
GA5_F2L246:
	UpdateType2 1, -35, GA5_F2L281	;+30
;************************************************************************
GA5_F2L281:
	UpdateType2 1, -1, GA5_F2L282	;+30
;************************************************************************
GA5_F2L282:
	UpdateType2 1, -14, GA5_F2L296	;+30
;************************************************************************
GA5_F2L296:
	UpdateType2 1, -1, GA5_F2L297	;+30
;************************************************************************
GA5_F2L297:
	UpdateType2 1, -37, GA5_F1L22	;+30


;************************************************************************
;* Type 56  7,1,20,1,..,20,1,7
;* Field n: 22,24,29,30,40,50,51,71,72,92,93,113,114,134,135,155,156,176
;*          177,197,198,218,219,239,240,260,261,281,282,302,303
;* Timing: Worst case: +34 cycles
;************************************************************************
GA6_F1L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA6_F1L24	;+30
;************************************************************************
GA6_F1L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -5, GA6_F1L29	;+20
;************************************************************************
GA6_F1L29:
	UpdateType2 1, -1, GA6_F1L30	;+30
;************************************************************************
GA6_F1L30:
	UpdateType2 1, -10, GA6_F1L40	;+30
;************************************************************************
GA6_F1L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -10, GA6_F1L50	;+30
;************************************************************************
GA6_F1L50:
	UpdateType2 1, -1, GA6_F1L51	;+30
;************************************************************************
GA6_F1L51:
	UpdateType2 1, -20, GA6_F1L71	;+30
;************************************************************************
GA6_F1L71:
	UpdateType2 1, -1, GA6_F1L72	;+30
;************************************************************************
GA6_F1L72:
	UpdateType2 1, -20, GA6_F1L92	;+30
;************************************************************************
GA6_F1L92:
	UpdateType2 1, -1, GA6_F1L93	;+30
;************************************************************************
GA6_F1L93:
	UpdateType2 1, -20, GA6_F1L113	;+30
;************************************************************************
GA6_F1L113:
	UpdateType2 1, -1, GA6_F1L114	;+30
;************************************************************************
GA6_F1L114:
	UpdateType2 1, -20, GA6_F1L134	;+30
;************************************************************************
GA6_F1L134:
	UpdateType2 1, -1, GA6_F1L135	;+30
;************************************************************************
GA6_F1L135:
	UpdateType2 1, -20, GA6_F1L155	;+30
;************************************************************************
GA6_F1L155:
	UpdateType2 1, -1, GA6_F1L156	;+30
;************************************************************************
GA6_F1L156:
	UpdateType2 1, -20, GA6_F1L176	;+30
;************************************************************************
GA6_F1L176:
	UpdateType2 1, -1, GA6_F1L177	;+30
;************************************************************************
GA6_F1L177:
	UpdateType2 1, -20, GA6_F1L197	;+30
;************************************************************************
GA6_F1L197:
	UpdateType2 1, -1, GA6_F1L198	;+30
;************************************************************************
GA6_F1L198:
	UpdateType2 1, -20, GA6_F1L218	;+30
;************************************************************************
GA6_F1L218:
	UpdateType2 1, -1, GA6_F1L219	;+30
;************************************************************************
GA6_F1L219:
	UpdateType2 1, -20, GA6_F1L239	;+30
;************************************************************************
GA6_F1L239:
	UpdateType2 1, -1, GA6_F1L240	;+30
;************************************************************************
GA6_F1L240:
	UpdateType2 1, -20, GA6_F1L260	;+30
;************************************************************************
GA6_F1L260:
	UpdateType2 1, -1, GA6_F1L261	;+30
;************************************************************************
GA6_F1L261:
	UpdateType2 1, -20, GA6_F1L281	;+30
;************************************************************************
GA6_F1L281:
	UpdateType2 1, -1, GA6_F1L282	;+30
;************************************************************************
GA6_F1L282:
	UpdateType2 1, -20, GA6_F1L302	;+30
;************************************************************************
GA6_F1L302:
	UpdateType2 1, -1, GA6_F1L303	;+30
;************************************************************************
GA6_F1L303:
	UpdateType2 1, -32, GA6_F2L22	;+30
;************************************************************************
GA6_F2L22:
	MOV	R5, PatternPtr		;+2
	MOV	R6, PatternPtr+1	;+2

	UpdateType2 1, -2, GA6_F2L24	;+30
;************************************************************************
GA6_F2L24:
	MOV	C, Text1Enable		;+1
	MOV	Status_TXT_ON, C	;+2

	UpdateType2 0, -5, GA6_F2L29	;+20
;************************************************************************
GA6_F2L29:
	UpdateType2 1, -1, GA6_F2L30	;+30
;************************************************************************
GA6_F2L30:
	UpdateType2 1, -10, GA6_F2L40	;+30
;************************************************************************
GA6_F2L40:
	CLR	Status_TXT_ON		;+1

	UpdateType2 0, -10, GA6_F2L50	;+20
;************************************************************************
GA6_F2L50:
	UpdateType2 1, -1, GA6_F2L51	;+30
;************************************************************************
GA6_F2L51:
	UpdateType2 1, -20, GA6_F2L71	;+30
;************************************************************************
GA6_F2L71:
	UpdateType2 1, -1, GA6_F2L72	;+30
;************************************************************************
GA6_F2L72:
	UpdateType2 1, -20, GA6_F2L92	;+30
;************************************************************************
GA6_F2L92:
	UpdateType2 1, -1, GA6_F2L93	;+30
;************************************************************************
GA6_F2L93:
	UpdateType2 1, -20, GA6_F2L113	;+30
;************************************************************************
GA6_F2L113:
	UpdateType2 1, -1, GA6_F2L114	;+30
;************************************************************************
GA6_F2L114:
	UpdateType2 1, -20, GA6_F2L134	;+30
;************************************************************************
GA6_F2L134:
	UpdateType2 1, -1, GA6_F2L135	;+30
;************************************************************************
GA6_F2L135:
	UpdateType2 1, -20, GA6_F2L155	;+30
;************************************************************************
GA6_F2L155:
	UpdateType2 1, -1, GA6_F2L156	;+30
;************************************************************************
GA6_F2L156:
	UpdateType2 1, -20, GA6_F2L176	;+30
;************************************************************************
GA6_F2L176:
	UpdateType2 1, -1, GA6_F2L177	;+30
;************************************************************************
GA6_F2L177:
	UpdateType2 1, -20, GA6_F2L197	;+30
;************************************************************************
GA6_F2L197:
	UpdateType2 1, -1, GA6_F2L198	;+30
;************************************************************************
GA6_F2L198:
	UpdateType2 1, -20, GA6_F2L218	;+30
;************************************************************************
GA6_F2L218:
	UpdateType2 1, -1, GA6_F2L219	;+30
;************************************************************************
GA6_F2L219:
	UpdateType2 1, -20, GA6_F2L239	;+30
;************************************************************************
GA6_F2L239:
	UpdateType2 1, -1, GA6_F2L240	;+30
;************************************************************************
GA6_F2L240:
	UpdateType2 1, -20, GA6_F2L260	;+30
;************************************************************************
GA6_F2L260:
	UpdateType2 1, -1, GA6_F2L261	;+30
;************************************************************************
GA6_F2L261:
	UpdateType2 1, -20, GA6_F2L281	;+30
;************************************************************************
GA6_F2L281:
	UpdateType2 1, -1, GA6_F2L282	;+30
;************************************************************************
GA6_F2L282:
	UpdateType2 1, -20, GA6_F2L302	;+30
;************************************************************************
GA6_F2L302:
	UpdateType2 1, -1, GA6_F2L303	;+30
;************************************************************************
GA6_F2L303:
	UpdateType2 1, -31, GA6_F1L22	;+30

END
